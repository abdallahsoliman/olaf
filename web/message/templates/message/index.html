{% extends 'olaf/base.html' %}
{% load static %}


{% block title %}Message{% endblock %}
{% block css %}
<link rel="stylesheet" href="{% static 'message/css/message.css' %}">
<link href="//cdn.rawgit.com/noelboss/featherlight/1.4.1/release/featherlight.min.css" type="text/css" rel="stylesheet" />
{% endblock %}

{% block content %}
<div class="contact-wrapper">
    <ul class="contact-list">
        {% for contact  in contacts %}
        <li>
            <a href="#" id="contact-{{contact.id}}" data-contact="{{contact.id}}" class="contact-list-item" href="#">
                <div class="contact-name"> >{{contact.name}}</div>
                <div class="latest-msg-preview">
                    <span>{{ contact.latest_active }}</span>
                    <p>{{contact.sorted_numbers.first.sorted_messages.first.content}}</p>
                </div>
            </a>
        </li>
        {% for number in contact.sorted_numbers %}
        {% include "message/message_list.html" with number=number %}
        {% endfor %}
        {% endfor %}
    </ul>
    {% endblock %}

    {% block js %}
    <script src="//cdn.rawgit.com/noelboss/featherlight/1.4.1/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="{% static 'message/js/message.js' %}" type="text/javascript"></script>
    {% endblock %}
</div>
